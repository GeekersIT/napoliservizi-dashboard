subscription Municipalita($quartieri_id: Int_comparison_exp = {}) {
  municipalita(order_by: {nome: asc}, where: {pacchetti_quartiere: {fine_validita: {_is_null: true}, quartieri: {quartiere_id: $quartieri_id}}}) {
    id
    nome
    updated_at
    vecchie_denominazioni(order_by: {created_at: desc, nome: asc}) {
      nome
      created_at
    }
    pacchetti_quartiere(order_by: {fine_validita: asc_nulls_first}) {
      inizio_validita
      fine_validita
      quartieri(order_by: {quartiere: {nome: asc}}) {
        quartiere {
          id
          nome
        }
      }
    }
  }
}

mutation UpdateMunicipalita($municipalita: [municipalita_insert_input!] = {}) {
  insert_municipalita(on_conflict: {constraint: municipalita_pkey, update_columns: nome}, objects: $municipalita) {
    affected_rows
  }
}