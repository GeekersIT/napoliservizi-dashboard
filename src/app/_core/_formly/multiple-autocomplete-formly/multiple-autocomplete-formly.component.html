<mat-chip-list #chipList>
    <ng-container *ngFor="let select of selectedData">
      <mat-chip class="cardinal-colors" (click)="removeChip(select)">
        <ng-container *ngTemplateOutlet="to.optionTemplate; context: {option:select.item}"></ng-container>
        <mat-icon class="mat-chip-remove">cancel</mat-icon>
      </mat-chip>
    </ng-container>

<input 
  matInput
  [matAutocomplete]="auto"
  [formControl]="formControl"
  [matChipInputFor]="chipList"
  [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
  [formlyAttributes]="field"
  [placeholder]="to.placeholder||''"
  [errorStateMatcher]="errorStateMatcher"
  [matChipInputAddOnBlur]="true"
  >
</mat-chip-list>


  <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
    <mat-option *ngFor="let data of filteredData  | async" [value]="data">
      <div (click)="optionClicked($event, data)">
        <mat-checkbox [checked]="data.selected||false" 
          (change)="toggleSelection(data)" 
          (click)="$event.stopPropagation()">
          <ng-container *ngTemplateOutlet="to.optionTemplate; context: {option:data.item}"></ng-container>
        </mat-checkbox>
      </div>
  </mat-option> 
</mat-autocomplete>